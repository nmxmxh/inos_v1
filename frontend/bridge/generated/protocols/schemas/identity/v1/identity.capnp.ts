// Auto-generated by capnpc-ts. DO NOT EDIT.
// source: protocols/schemas/identity/v1/identity.capnp

export class IdentityRegistry {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 0;
  static readonly POINTER_COUNT = 1;
  static readonly TOTAL_BYTES = 8;

  // dids: List (pointer at byte offset 0, slot 0)
}

export class IdentityEntry {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 8;
  static readonly POINTER_COUNT = 5;
  static readonly TOTAL_BYTES = 48;

  // did: string (pointer at byte offset 8, slot 0)
  // publicKey: Uint8Array (pointer at byte offset 16, slot 1)
  get status(): IdentityStatus { return this._view.getUint16(this._offset + 0, true); }
  set status(v: IdentityStatus) { this._view.setUint16(this._offset + 0, v, true); }
  // devices: List (pointer at byte offset 24, slot 2)
  get threshold(): number { return this._view.getUint8(this._offset + 2); }
  set threshold(v: number) { this._view.setUint8(this._offset + 2, v); }
  get totalShares(): number { return this._view.getUint8(this._offset + 3); }
  set totalShares(v: number) { this._view.setUint8(this._offset + 3, v); }
  // guardianDids: List (pointer at byte offset 32, slot 3)
  get recoveryThreshold(): number { return this._view.getUint8(this._offset + 4); }
  set recoveryThreshold(v: number) { this._view.setUint8(this._offset + 4, v); }
  // metadata: Metadata (pointer at byte offset 40, slot 4)
}

export class DeviceEntry {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 24;
  static readonly POINTER_COUNT = 7;
  static readonly TOTAL_BYTES = 80;

  // deviceId: string (pointer at byte offset 24, slot 0)
  // nodeId: string (pointer at byte offset 32, slot 1)
  // name: string (pointer at byte offset 40, slot 2)
  get addedAt(): bigint { return this._view.getBigInt64(this._offset + 0, true); }
  set addedAt(v: bigint) { this._view.setBigInt64(this._offset + 0, v, true); }
  get lastSeenAt(): bigint { return this._view.getBigInt64(this._offset + 8, true); }
  set lastSeenAt(v: bigint) { this._view.setBigInt64(this._offset + 8, v, true); }
  // fingerprint: DeviceFingerprint (pointer at byte offset 48, slot 3)
  get tier(): ResourceTier { return this._view.getUint16(this._offset + 16, true); }
  set tier(v: ResourceTier) { this._view.setUint16(this._offset + 16, v, true); }
  // profile: ResourceProfile (pointer at byte offset 56, slot 4)
  // capabilities: DeviceCapability (pointer at byte offset 64, slot 5)
  // metadata: Metadata (pointer at byte offset 72, slot 6)
}

export class DeviceFingerprint {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 0;
  static readonly POINTER_COUNT = 5;
  static readonly TOTAL_BYTES = 40;

  // webAuthn: Uint8Array (pointer at byte offset 0, slot 0)
  // canvas: Uint8Array (pointer at byte offset 8, slot 1)
  // audio: Uint8Array (pointer at byte offset 16, slot 2)
  // fonts: Uint8Array (pointer at byte offset 24, slot 3)
  // hardware: string (pointer at byte offset 32, slot 4)
}

export const enum IdentityStatus {
  ACTIVE = 0,
  UNDER_RECOVERY = 1,
  REVOKED = 2,
  SYSTEM_WALLET = 3,
}

export class ResourceProfile {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 32;
  static readonly POINTER_COUNT = 0;
  static readonly TOTAL_BYTES = 32;

  get memoryLimitMb(): number { return this._view.getUint32(this._offset + 0, true); }
  set memoryLimitMb(v: number) { this._view.setUint32(this._offset + 0, v, true); }
  get storageLimitGb(): number { return this._view.getUint32(this._offset + 4, true); }
  set storageLimitGb(v: number) { this._view.setUint32(this._offset + 4, v, true); }
  get cpuCores(): number { return this._view.getUint8(this._offset + 8); }
  set cpuCores(v: number) { this._view.setUint8(this._offset + 8, v); }
  get p2pPriority(): number { return this._view.getFloat32(this._offset + 12, true); }
  set p2pPriority(v: number) { this._view.setFloat32(this._offset + 12, v, true); }
  get idbLimitMb(): number { return this._view.getUint32(this._offset + 16, true); }
  set idbLimitMb(v: number) { this._view.setUint32(this._offset + 16, v, true); }
  get opfsLimitGb(): number { return this._view.getUint32(this._offset + 20, true); }
  set opfsLimitGb(v: number) { this._view.setUint32(this._offset + 20, v, true); }
  get p2pQuotaGb(): number { return this._view.getUint32(this._offset + 24, true); }
  set p2pQuotaGb(v: number) { this._view.setUint32(this._offset + 24, v, true); }
}

export class DeviceCapability {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 16;
  static readonly POINTER_COUNT = 0;
  static readonly TOTAL_BYTES = 16;

  get hasGpu(): boolean {
    return ((this._view.getUint8(this._offset + 0) >>> 0) & 1) === 1;
  }
  set hasGpu(v: boolean) {
    const byte = this._view.getUint8(this._offset + 0);
    this._view.setUint8(this._offset + 0, v ? (byte | (1 << 0)) : (byte & ~(1 << 0)));
  }
  get hasWebGpu(): boolean {
    return ((this._view.getUint8(this._offset + 0) >>> 1) & 1) === 1;
  }
  set hasWebGpu(v: boolean) {
    const byte = this._view.getUint8(this._offset + 0);
    this._view.setUint8(this._offset + 0, v ? (byte | (1 << 1)) : (byte & ~(1 << 1)));
  }
  get canMine(): boolean {
    return ((this._view.getUint8(this._offset + 0) >>> 2) & 1) === 1;
  }
  set canMine(v: boolean) {
    const byte = this._view.getUint8(this._offset + 0);
    this._view.setUint8(this._offset + 0, v ? (byte | (1 << 2)) : (byte & ~(1 << 2)));
  }
  get canInference(): boolean {
    return ((this._view.getUint8(this._offset + 0) >>> 3) & 1) === 1;
  }
  set canInference(v: boolean) {
    const byte = this._view.getUint8(this._offset + 0);
    this._view.setUint8(this._offset + 0, v ? (byte | (1 << 3)) : (byte & ~(1 << 3)));
  }
  get maxOpsPerSec(): bigint { return this._view.getBigUint64(this._offset + 8, true); }
  set maxOpsPerSec(v: bigint) { this._view.setBigUint64(this._offset + 8, v, true); }
}

export const enum ResourceTier {
  LIGHT = 0,
  MODERATE = 1,
  HEAVY = 2,
  DEDICATED = 3,
}

export class IdentityAction {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 16;
  static readonly POINTER_COUNT = 2;
  static readonly TOTAL_BYTES = 32;

  static readonly Which = {
    ADD_DEVICE: 0,
    REMOVE_DEVICE: 1,
    INITIATE_RECOVERY: 2,
    SUBMIT_RECOVERY_SIGNATURE: 3,
    UPGRADE_TO_FULL_IDENTITY: 4,
  } as const;

  get which(): number { return this._view.getUint16(this._offset + 0, true); }

  // addDevice: DeviceEntry (pointer at byte offset 16, slot 0)
  // removeDevice: string (pointer at byte offset 16, slot 0)
  // submitRecoverySignature: Uint8Array (pointer at byte offset 16, slot 0)
  // upgradeToFullIdentity: string (pointer at byte offset 16, slot 0)
  // signature: Uint8Array (pointer at byte offset 24, slot 1)
  get timestamp(): bigint { return this._view.getBigInt64(this._offset + 8, true); }
  set timestamp(v: bigint) { this._view.setBigInt64(this._offset + 8, v, true); }
}

