// Auto-generated by capnpc-ts. DO NOT EDIT.
// source: protocols/schemas/p2p/v1/mesh.capnp

export class PeerCapability {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 24;
  static readonly POINTER_COUNT = 6;
  static readonly TOTAL_BYTES = 72;

  // peerId: string (pointer at byte offset 24, slot 0)
  // availableChunks: List (pointer at byte offset 32, slot 1)
  get bandwidthKbps(): number { return this._view.getFloat32(this._offset + 0, true); }
  set bandwidthKbps(v: number) { this._view.setFloat32(this._offset + 0, v, true); }
  get latencyMs(): number { return this._view.getFloat32(this._offset + 4, true); }
  set latencyMs(v: number) { this._view.setFloat32(this._offset + 4, v, true); }
  get reputation(): number { return this._view.getFloat32(this._offset + 8, true); }
  set reputation(v: number) { this._view.setFloat32(this._offset + 8, v, true); }
  // capabilities: List (pointer at byte offset 40, slot 2)
  get lastSeen(): bigint { return this._view.getBigInt64(this._offset + 16, true); }
  set lastSeen(v: bigint) { this._view.setBigInt64(this._offset + 16, v, true); }
  get connectionState(): ConnectionState { return this._view.getUint16(this._offset + 12, true); }
  set connectionState(v: ConnectionState) { this._view.setUint16(this._offset + 12, v, true); }
  // region: string (pointer at byte offset 48, slot 3)
  // coordinates: GeoCoordinates (pointer at byte offset 56, slot 4)
  get role(): RuntimeRole { return this._view.getUint16(this._offset + 14, true); }
  set role(v: RuntimeRole) { this._view.setUint16(this._offset + 14, v, true); }
  // runtimeCaps: RuntimeCapabilities (pointer at byte offset 64, slot 5)
}

export class GeoCoordinates {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 8;
  static readonly POINTER_COUNT = 0;
  static readonly TOTAL_BYTES = 8;

  get latitude(): number { return this._view.getFloat32(this._offset + 0, true); }
  set latitude(v: number) { this._view.setFloat32(this._offset + 0, v, true); }
  get longitude(): number { return this._view.getFloat32(this._offset + 4, true); }
  set longitude(v: number) { this._view.setFloat32(this._offset + 4, v, true); }
}

export const enum ConnectionState {
  DISCONNECTED = 0,
  CONNECTING = 1,
  CONNECTED = 2,
  DEGRADED = 3,
  FAILED = 4,
}

export class ModelMetadata {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 56;
  static readonly POINTER_COUNT = 10;
  static readonly TOTAL_BYTES = 136;

  // modelId: string (pointer at byte offset 56, slot 0)
  // name: string (pointer at byte offset 64, slot 1)
  // version: string (pointer at byte offset 72, slot 2)
  get totalChunks(): number { return this._view.getUint32(this._offset + 0, true); }
  set totalChunks(v: number) { this._view.setUint32(this._offset + 0, v, true); }
  get totalSize(): bigint { return this._view.getBigUint64(this._offset + 8, true); }
  set totalSize(v: bigint) { this._view.setBigUint64(this._offset + 8, v, true); }
  // chunkIds: List (pointer at byte offset 80, slot 3)
  get createdAt(): bigint { return this._view.getBigUint64(this._offset + 16, true); }
  set createdAt(v: bigint) { this._view.setBigUint64(this._offset + 16, v, true); }
  get lastAccessed(): bigint { return this._view.getBigUint64(this._offset + 24, true); }
  set lastAccessed(v: bigint) { this._view.setBigUint64(this._offset + 24, v, true); }
  get modelType(): ModelType { return this._view.getUint16(this._offset + 4, true); }
  set modelType(v: ModelType) { this._view.setUint16(this._offset + 4, v, true); }
  get format(): ModelFormat { return this._view.getUint16(this._offset + 6, true); }
  set format(v: ModelFormat) { this._view.setUint16(this._offset + 6, v, true); }
  // tags: List (pointer at byte offset 88, slot 4)
  // architecture: string (pointer at byte offset 96, slot 5)
  get parameterCount(): bigint { return this._view.getBigUint64(this._offset + 32, true); }
  set parameterCount(v: bigint) { this._view.setBigUint64(this._offset + 32, v, true); }
  get quantization(): QuantizationLevel { return this._view.getUint16(this._offset + 40, true); }
  set quantization(v: QuantizationLevel) { this._view.setUint16(this._offset + 40, v, true); }
  // license: string (pointer at byte offset 104, slot 6)
  // author: string (pointer at byte offset 112, slot 7)
  // description: string (pointer at byte offset 120, slot 8)
  get estimatedInferenceTimeMs(): number { return this._view.getFloat32(this._offset + 44, true); }
  set estimatedInferenceTimeMs(v: number) { this._view.setFloat32(this._offset + 44, v, true); }
  get memoryRequiredMb(): number { return this._view.getUint32(this._offset + 48, true); }
  set memoryRequiredMb(v: number) { this._view.setUint32(this._offset + 48, v, true); }
  get gpuRequired(): boolean {
    return ((this._view.getUint8(this._offset + 42) >>> 0) & 1) === 1;
  }
  set gpuRequired(v: boolean) {
    const byte = this._view.getUint8(this._offset + 42);
    this._view.setUint8(this._offset + 42, v ? (byte | (1 << 0)) : (byte & ~(1 << 0)));
  }
  // layerChunks: List (pointer at byte offset 128, slot 9)
}

export class LayerChunkMapping {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 8;
  static readonly POINTER_COUNT = 1;
  static readonly TOTAL_BYTES = 16;

  get layerIndex(): number { return this._view.getUint32(this._offset + 0, true); }
  set layerIndex(v: number) { this._view.setUint32(this._offset + 0, v, true); }
  // chunkIndices: List (pointer at byte offset 8, slot 0)
}

export const enum ModelType {
  LLM = 0,
  VISION = 1,
  AUDIO = 2,
  MULTIMODAL = 3,
  EMBEDDING = 4,
  DIFFUSION = 5,
}

export const enum ModelFormat {
  SAFETENSORS = 0,
  GGUF = 1,
  ONNX = 2,
  PYTORCH = 3,
  TENSORFLOW = 4,
}

export const enum QuantizationLevel {
  FP32 = 0,
  FP16 = 1,
  INT8 = 2,
  INT4 = 3,
}

export class ModelQuery {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 32;
  static readonly POINTER_COUNT = 2;
  static readonly TOTAL_BYTES = 48;

  get modelType(): ModelType { return this._view.getUint16(this._offset + 0, true); }
  set modelType(v: ModelType) { this._view.setUint16(this._offset + 0, v, true); }
  // tags: List (pointer at byte offset 32, slot 0)
  get maxSize(): bigint { return this._view.getBigUint64(this._offset + 8, true); }
  set maxSize(v: bigint) { this._view.setBigUint64(this._offset + 8, v, true); }
  get minReputation(): number { return this._view.getFloat32(this._offset + 4, true); }
  set minReputation(v: number) { this._view.setFloat32(this._offset + 4, v, true); }
  get createdAfter(): bigint { return this._view.getBigUint64(this._offset + 16, true); }
  set createdAfter(v: bigint) { this._view.setBigUint64(this._offset + 16, v, true); }
  get limit(): number { return this._view.getUint16(this._offset + 2, true); }
  set limit(v: number) { this._view.setUint16(this._offset + 2, v, true); }
  get offset(): number { return this._view.getUint16(this._offset + 24, true); }
  set offset(v: number) { this._view.setUint16(this._offset + 24, v, true); }
  // searchTerm: string (pointer at byte offset 40, slot 1)
}

export class MeshMetrics {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 64;
  static readonly POINTER_COUNT = 0;
  static readonly TOTAL_BYTES = 64;

  get totalPeers(): number { return this._view.getUint32(this._offset + 0, true); }
  set totalPeers(v: number) { this._view.setUint32(this._offset + 0, v, true); }
  get connectedPeers(): number { return this._view.getUint32(this._offset + 4, true); }
  set connectedPeers(v: number) { this._view.setUint32(this._offset + 4, v, true); }
  get dhtEntries(): number { return this._view.getUint32(this._offset + 8, true); }
  set dhtEntries(v: number) { this._view.setUint32(this._offset + 8, v, true); }
  get gossipRatePerSec(): number { return this._view.getFloat32(this._offset + 12, true); }
  set gossipRatePerSec(v: number) { this._view.setFloat32(this._offset + 12, v, true); }
  get avgReputation(): number { return this._view.getFloat32(this._offset + 16, true); }
  set avgReputation(v: number) { this._view.setFloat32(this._offset + 16, v, true); }
  get bytesSent(): bigint { return this._view.getBigUint64(this._offset + 24, true); }
  set bytesSent(v: bigint) { this._view.setBigUint64(this._offset + 24, v, true); }
  get bytesReceived(): bigint { return this._view.getBigUint64(this._offset + 32, true); }
  set bytesReceived(v: bigint) { this._view.setBigUint64(this._offset + 32, v, true); }
  get p50LatencyMs(): number { return this._view.getFloat32(this._offset + 20, true); }
  set p50LatencyMs(v: number) { this._view.setFloat32(this._offset + 20, v, true); }
  get p95LatencyMs(): number { return this._view.getFloat32(this._offset + 40, true); }
  set p95LatencyMs(v: number) { this._view.setFloat32(this._offset + 40, v, true); }
  get connectionSuccessRate(): number { return this._view.getFloat32(this._offset + 44, true); }
  set connectionSuccessRate(v: number) { this._view.setFloat32(this._offset + 44, v, true); }
  get chunkFetchSuccessRate(): number { return this._view.getFloat32(this._offset + 48, true); }
  set chunkFetchSuccessRate(v: number) { this._view.setFloat32(this._offset + 48, v, true); }
  get localChunks(): number { return this._view.getUint32(this._offset + 52, true); }
  set localChunks(v: number) { this._view.setUint32(this._offset + 52, v, true); }
  get totalChunksAvailable(): number { return this._view.getUint32(this._offset + 56, true); }
  set totalChunksAvailable(v: number) { this._view.setUint32(this._offset + 56, v, true); }
}

export const enum ChunkPriority {
  LOW = 0,
  MEDIUM = 1,
  HIGH = 2,
  CRITICAL = 3,
}

export const enum PrefetchPriority {
  BACKGROUND = 0,
  NORMAL = 1,
  AGGRESSIVE = 2,
}

export class MeshEvent {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 8;
  static readonly POINTER_COUNT = 1;
  static readonly TOTAL_BYTES = 16;

  static readonly Which = {
    PEER_UPDATE: 0,
    CHUNK_DISCOVERED: 1,
    MODEL_REGISTERED: 2,
    REPUTATION_CHANGE: 3,
  } as const;

  get which(): number { return this._view.getUint16(this._offset + 0, true); }

  // peerUpdate: PeerCapability (pointer at byte offset 8, slot 0)
  // chunkDiscovered: ChunkDiscovery (pointer at byte offset 8, slot 0)
  // modelRegistered: ModelMetadata (pointer at byte offset 8, slot 0)
  // reputationChange: ReputationUpdate (pointer at byte offset 8, slot 0)
}

export class ChunkDiscovery {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 8;
  static readonly POINTER_COUNT = 2;
  static readonly TOTAL_BYTES = 24;

  // chunkHash: string (pointer at byte offset 8, slot 0)
  // peerId: string (pointer at byte offset 16, slot 1)
  get priority(): ChunkPriority { return this._view.getUint16(this._offset + 0, true); }
  set priority(v: ChunkPriority) { this._view.setUint16(this._offset + 0, v, true); }
}

export class ReputationUpdate {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 8;
  static readonly POINTER_COUNT = 2;
  static readonly TOTAL_BYTES = 24;

  // peerId: string (pointer at byte offset 8, slot 0)
  get newScore(): number { return this._view.getFloat32(this._offset + 0, true); }
  set newScore(v: number) { this._view.setFloat32(this._offset + 0, v, true); }
  // reason: string (pointer at byte offset 16, slot 1)
}

export class DHTEntry {
  private _view: DataView;
  private _offset: number;

  constructor(buffer: ArrayBuffer, offset: number = 0) {
    this._view = new DataView(buffer);
    this._offset = offset;
  }

  static readonly DATA_BYTES = 16;
  static readonly POINTER_COUNT = 2;
  static readonly TOTAL_BYTES = 32;

  // key: string (pointer at byte offset 16, slot 0)
  // value: List (pointer at byte offset 24, slot 1)
  get timestamp(): bigint { return this._view.getBigInt64(this._offset + 0, true); }
  set timestamp(v: bigint) { this._view.setBigInt64(this._offset + 0, v, true); }
  get ttl(): bigint { return this._view.getBigInt64(this._offset + 8, true); }
  set ttl(v: bigint) { this._view.setBigInt64(this._offset + 8, v, true); }
}

